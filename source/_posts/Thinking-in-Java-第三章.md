---
title: Thinking in Java 第三章
date: 2019-07-16 22:15:13
tags:
categories: Java
---
#  第三章 操作符
Java 操作符是建立在C++基础上的。
## 3.1 更简单的打印语句
```
import static net.mindview.util.Print.*;
```
导入jar包后 可以使用更简单的写法  printr() 
## 3.2 使用Java 操作符
```
+ - * / = == !=
```
## 3.3 优先级
先乘除后加减 括号内优先执行。
类型转换 操作符后面的按前面的转换。
## 3.4 赋值
右值赋给左值，a=b 则 b 值复制一份给a。但是如果是将一个对象赋值给另一个对象 其实就是**引用**。
例如 d 是个对象 把 d 赋值给对象c 那么 c 和 d 都指向原来d 对象所在的内存地址 。 现在改变 c 同时也会 改变 d 对象 。
这种现象被称作 java **别名现象** 。
#### 3.4.1 方法中调用的别名问题
方法调用 对象 改变其中的值
```
class Letter {
	char c;
}

public class PassObject {
	static void f(Letter y) {
		y.c = 'z';
		System.out.println(y.c);
	}
	
	public static void main(String[] args) {
		Letter x = new Letter();
		x.c = 'a';
		System.out.println(x.c);
		f(x);
		System.out.println(x.c);
	}
}
```
## 3.5 算术操作符
简化运算符的功能如要将x加4之后再赋值给x，则可以写成：
```
x+=4;
```
#### 3.5.1 一元加减操作符
一元减号（-）和一元加号（+）与二元加号和减号都是相同的运算符。根据表达式的书写形式，编译器会自动判断使用哪一种。例如下述语句：

x = -a;
它的含义是显然的。编译器能正确识别下述语句：

x = a * -b;
但读者会被搞糊涂，所以最好更明确地写成：

x = a * (-b); 一元减号得到的运算对象的负值。一元加号的含义与一元减号相反，虽然它实际并不做任何事情。
## 3.6 自动递增和递减
++a 会先执行运算，再生成值。
a++ 先生成值在运算。
## 3.7 关系操作符
关系操作符生成的是一个boolean（布尔）结果。关系为真则结果为true，如果关系为假则结果为false。关系操作符号包括小于（＜）、大于（＞）、小于等于（＜=）、大于等于（＞＝）、等于（==）以及不等于（！=）。
操作符“==”和“！=”同样适用于操作对象，但是与基本操作类型相比有一些不同。
**bool类型不能比较大小，因为本身就是bool类型 比大小没意义**
```
package com.chenxyt.java.practice;
public class OperationTest{
	public static void main(String[] args) {
		Integer itg1 = new Integer(22);
		Integer itg2 = new Integer(22);
		System.out.println(itg1==itg2);
		System.out.println(itg1!=itg2);
		int int1 = 22;
		int int2 = 22;
		System.out.println(int1==int2);
		System.out.println(int1!=int2);
	}
}
```
重点是，两个对象是“！=”，因为对于对象来说，“==”和“！=”比较的是对象的引用，虽然这两个对象的值相同，但是他们对象的引用并不是一个，也就是他们在内存中有两个不同的存储位置，所以不相同。所以要想比较对象的值是否相同，我们可以使用对象的equals（）方法来进行比较，它是Object类的一个通用方法，第一章中说到过所有类的父类都是Object，因此任何类的对象都可以调用这个方法。
```
package com.chenxyt.java.practice;
public class OperationTest{
	public static void main(String[] args) {
		Integer itg1 = new Integer(22);
		Integer itg2 = new Integer(22);
		System.out.println(itg1.equals(itg2));
	}
}
```
## 3.8 逻辑操作符
Java中的逻辑操作符与其它语言基本类似，包括与（&&）、或（||）、非（！）
#### 3.8.1 短路
即当两个算式做逻辑与运算时，如果左边第一个算式为假，则显然这个逻辑表达式最后的结果一定为假，那么就没有必要进行下边的表达式计算，直接结束运算，这个过程称作短路。
## 3.9 直接常量
直接常量 例如 π e   编译器可以准确知道要生成什么类型 但是有时候还是模糊， 需要加一些字符来添加额外信息 指导编译器。  例如 :
```
char c = 0xffff;
print(Interger.toBinaryString(c)); //char 需要转换2进制
```
常量后面可以标志类型。 L 代表 long F 代表 float D 代表 double 例如 int x = 1234567L;
16进制 前缀0X  8进制前缀0后续0～7的数字表示。
#### 3.9.1 指数记数法
Java 中 1.39e-43 其实 就是1.39*10-43
## 3.10 按位操作符
 Java中的按位操作符与其他语言基本相似，有按位与（&）、按位或（|）、按位异或（^）和按位非（~）操作符。它们针对基本数据类型的一个比特位（bit）进行运算。运算规则如下，&操作符必须同时为1才为1，|操作符只有同时为0时才为0，^操作符只要有一个为1就为1，~是单目运算符，取反，若值为1则结果为0，反之为1。按位操作符除了~还可以与“=”合起来使用，如&=或者|=、^=。
对于布尔值，同样可以进行按位与、按位或和按位异或运算，但是不能进行按位非运算，并且他们不会被短路，不管第一个表达式结果是什么，都会继续运算下去。

## 3.11 移位操作符
 移位操作符操作的也是二进制的“位”，移位操作符只能用来处理整数类型。移位操作也是二元操作符，一共有三种，左移操作符（<<），右移操作符（>>），无符号右移操作符（>>>）
左移操作符是操作符左边的数向左移动操作符右边指定的位数，低位补0，右移操作符是操作符左边的数向右移动操作符右边指定的位数，其中正数高位补0，负数高位补1。无符号右移操作符是Java独有的一种，即不管正数还是负数，右移之后高位都补0。

## 3.12 三元操作符 if-else
boolean-exp？value1：value2；

## 3.1.3 字符串操作符 + 和 +=
Java中可以使用+和+=连接String类型，并且当操作符左边你的数为String时，Java会试图将操作符右边的类型转换成String。

## 3.14 使用操作符时常犯的的错误
 注意“=”和“==”的区别，以及逻辑运算符如（&&）和位运算符（&）的区别和前自增“++i”和后自增“i++”的区别。注意“==”和“equals（）”的使用，注意别名现象。

## 3.15 类型转换操作符

在c 和 c++ 类型转型非常容易溢出出错。但是在Java中是非常安全的。Java可以让我们把基本数据类型转换成别的基本数据类型。bool 除外。
#### 3.15.1 截尾和舍入
round() 对 double float 类型截取 round() 属于java.lang 的一部分 因此不需要额外的倒入。
#### 3.15.2 提升
例如 : float 和 double 相乘 则结果提升尾 double 类型。

## 3.16 java 没有sizeof
C 和 C++ sizeof() 主要是为了移植 不同数据在不同机器位数不一样。所以必须要熟悉 一个字节占多少位。 Java 并不需要。 因为说有的数据类型在所有机器上是统一的。 **它已经被设计在程序语言中了**。

## 3.17 操作符小结
java 遇到 int 最大值做乘法也会溢出 但是编译器并不会报错。
**当类型转换成较小的类型时候 必须要留意‘窄化转换’ 否则会丢失信息。**
## 3.18 总结
如果有c基础 学习Java语法并不难。Java语法类C。

